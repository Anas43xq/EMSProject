import{u as b,s as j,j as e}from"./index-BBL5zgFY.js";import{f as p,u as N,r,L as d}from"./vendor-5bkAA5gm.js";import{A as f,j as u,l as v,m as w,n as o,c as _,o as P,p as k,F as E}from"./lucide-cejH3fEv.js";import{f as i}from"./format-sbWH3_uq.js";import"./pdf-BwXo9bY9.js";import"./supabase-CQnWzhEg.js";function z(){var n;const{id:t}=p(),c=N(),[s,x]=r.useState(null),[h,g]=r.useState(!0),{showNotification:m}=b();r.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{const{data:a,error:l}=await j.from("employees").select(`
          *,
          departments!department_id (name)
        `).eq("id",t).maybeSingle();if(l)throw l;if(!a){m("error","Employee not found"),c("/employees");return}x(a)}catch(a){console.error("Error loading employee:",a),m("error","Failed to load employee details"),c("/employees")}finally{g(!1)}};return h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(d,{to:"/employees",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.position})]})]}),e.jsxs(d,{to:`/employees/${t}/edit`,className:"flex items-center space-x-2 bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:"Edit Employee"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Employee Number"}),e.jsx("p",{className:"text-gray-900",children:s.employee_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center text-gray-900",children:[e.jsx(w,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-600",children:s.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Phone"}),e.jsxs("div",{className:"flex items-center text-gray-900",children:[e.jsx(o,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:text-blue-600",children:s.phone||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date of Birth"}),e.jsxs("div",{className:"flex items-center text-gray-900",children:[e.jsx(_,{className:"w-4 h-4 mr-2 text-gray-400"}),s.date_of_birth?i(new Date(s.date_of_birth),"PPP"):"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Gender"}),e.jsx("p",{className:"text-gray-900 capitalize",children:s.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Address"}),e.jsxs("div",{className:"flex items-start text-gray-900",children:[e.jsx(P,{className:"w-4 h-4 mr-2 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{children:s.address||"N/A"}),(s.city||s.state||s.postal_code)&&e.jsx("p",{className:"text-sm text-gray-600",children:[s.city,s.state,s.postal_code].filter(Boolean).join(", ")})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Employment Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:((n=s.departments)==null?void 0:n.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Position"}),e.jsx("p",{className:"text-gray-900",children:s.position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Employment Type"}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 capitalize",children:s.employment_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Status"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${s.status==="active"?"bg-green-100 text-green-800":s.status==="on-leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Hire Date"}),e.jsx("p",{className:"text-gray-900",children:i(new Date(s.hire_date),"PPP")})]}),s.termination_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Termination Date"}),e.jsx("p",{className:"text-gray-900",children:i(new Date(s.termination_date),"PPP")})]})]})]}),s.qualifications&&s.qualifications.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{className:"w-5 h-5 mr-2"}),"Qualifications"]}),e.jsx("div",{className:"space-y-3",children:s.qualifications.map((a,l)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.degree}),e.jsx("p",{className:"text-sm text-gray-600",children:a.institution})]},l))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Emergency Contact"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:s.emergency_contact_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Phone"}),e.jsxs("div",{className:"flex items-center text-gray-900",children:[e.jsx(o,{className:"w-4 h-4 mr-2 text-gray-400"}),s.emergency_contact_phone?e.jsx("a",{href:`tel:${s.emergency_contact_phone}`,className:"hover:text-blue-600",children:s.emergency_contact_phone}):"N/A"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"Years of Service"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[Math.floor((new Date().getTime()-new Date(s.hire_date).getTime())/(1e3*60*60*24*365))," years"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Employment Status"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${s.status==="active"?"bg-green-100 text-green-800":s.status==="on-leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status})]})]})]})]})]})]}):null}export{z as default};
