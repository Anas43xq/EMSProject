import{a as p,u,j as e,s as g}from"./index-BBL5zgFY.js";import{r as n}from"./vendor-5bkAA5gm.js";import{l as h,q as b,X as f,t as y,u as j,B as N,v}from"./lucide-cejH3fEv.js";import"./pdf-BwXo9bY9.js";import"./supabase-CQnWzhEg.js";function S(){const{user:s}=p(),{showNotification:r}=u(),[d,t]=n.useState(!1),[l,i]=n.useState((s==null?void 0:s.email)||""),[c,o]=n.useState(!1),x=async()=>{if(!l||!l.includes("@")){r("error","Please enter a valid email address");return}if(l===(s==null?void 0:s.email)){t(!1);return}o(!0);try{const{error:a}=await g.auth.updateUser({email:l});if(a)throw a;r("success","Email updated successfully. Please check your new email to confirm the change."),t(!1)}catch(a){console.error("Error updating email:",a),r("error","Failed to update email. Please try again."),i((s==null?void 0:s.email)||"")}finally{o(!1)}},m=()=>{t(!1),i((s==null?void 0:s.email)||"")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account and preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(h,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Profile Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("div",{className:"flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"email",value:l,onChange:a=>i(a.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new email"}),e.jsxs("button",{onClick:x,disabled:c,className:"flex items-center space-x-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:c?"Saving...":"Save"})]}),e.jsx("button",{onClick:m,disabled:c,className:"flex items-center space-x-1 px-3 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors disabled:opacity-50",children:e.jsx(f,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"email",value:s==null?void 0:s.email,disabled:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center space-x-1 px-3 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Edit"})]})]})}),d&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"A confirmation link will be sent to your new email address."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:s==null?void 0:s.role,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 capitalize"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(j,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Change Password"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{className:"bg-blue-900 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Update Password"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(N,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Notifications"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded text-blue-900 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Email notifications for leave approvals"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded text-blue-900 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Email notifications for attendance reminders"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded text-blue-900 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Email notifications for performance reviews"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded text-blue-900 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Email notifications for payroll updates"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(v,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Account Info"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Account Type"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:s==null?void 0:s.role})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Active"})]})]})]}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="hr")&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Administrator Access"}),e.jsx("p",{className:"text-sm text-blue-800",children:"You have administrative privileges to manage employees, departments, and system settings."})]})]})]})]})}export{S as default};
