import{u as m,s as x,j as e}from"./index-BBL5zgFY.js";import{r as a}from"./vendor-5bkAA5gm.js";import{P as p,b as g}from"./lucide-cejH3fEv.js";import"./pdf-BwXo9bY9.js";import"./supabase-CQnWzhEg.js";function y(){const[n,l]=a.useState([]),[o,i]=a.useState(!0),{showNotification:d}=m();a.useEffect(()=>{c()},[]);const c=async()=>{try{console.log("Loading departments...");const{data:s,error:t}=await x.from("departments").select(`
          *,
          employees!employees_department_id_fkey (count)
        `).order("name");if(t)throw console.error("Supabase error:",t),t;console.log("Departments loaded:",s==null?void 0:s.length),l(s||[])}catch(s){console.error("Error loading departments:",s),d("error","Failed to load departments")}finally{i(!1)}};return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Departments"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage academic and administrative departments"})]}),e.jsxs("button",{className:"flex items-center space-x-2 bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Department"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>{var t,r;return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.type==="academic"?"bg-blue-100":"bg-green-100"}`,children:e.jsx(g,{className:`w-6 h-6 ${s.type==="academic"?"text-blue-900":"text-green-900"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full ${s.type==="academic"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.type}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.description}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Employees: ",e.jsx("span",{className:"font-medium text-gray-900",children:((r=(t=s.employees)==null?void 0:t[0])==null?void 0:r.count)||0})]})})]})]})},s.id)})})]})}export{y as default};
